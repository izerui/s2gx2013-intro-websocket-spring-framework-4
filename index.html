<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Intro To WebSocket Applications with Spring Framework 4.0</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/showoff.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content subsection" ref="overview/slides/1">
<h1>Intro to WebSocket with<br>Spring Framework 4.0</br>

<h2><a href="http://twitter.com/rstoya05">Rossen Stoyanchev</a></h2>
</h1>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small" ref="overview/slides/2">
<h1>This presentation</h1>

<br><br>


<h2><a href="https://github.com/rstoyanchev/s2gx2013-intro-websocket-spring-framework-4">https://github.com/rstoyanchev/</a></h2>

<h2><a href="https://github.com/rstoyanchev/s2gx2013-intro-websocket-spring-framework-4">s2gx2013-intro-websocket-spring-framework-4</a></h2>
</br>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small bullets incremental" ref="overview/slides/3">
<h1>About this talk</h1>

<ul>
<li>Introduces WebSocket and Spring Framework support</li>
<li>Separate talk on actually-<br>"Building WebSocket Browser Apps with Spring"</br>
<li><a href="https://github.com/rstoyanchev/s2gx2013-websocket-browser-apps-with-spring">https://github.com/rstoyanchev/</a><br><a href="https://github.com/rstoyanchev/s2gx2013-websocket-browser-apps-with-spring">s2gx2013-websocket-browser-apps-with-spring</a></br>
</li>

</li>
</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small" ref="overview/slides/4">
<h1>WebSocket</h1>

<br>


<h2>"mechanism for browser-based applications...</h2>

<h2>two-way communication with servers...</h2>

<h2>does not rely on multiple HTTP connections"</h2>

<br>


<p>- <a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 6455</a>, <i>The WebSocket Protocol</i></p>
</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="overview/slides/5">
<p><img src="./file/overview/html5.png" alt="HTML5 logo"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/6">
<h1>Excitement is justified</h1>

<h1>given long history of Ajax/Comet</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/7">
<h1>However expectations have come</h1>

<h1>ahead of experience</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/8">
<h1>A Few (False) Expectations</h1>

<ul>
<li>It's standard, it's supported everywhere</li>
<li>It's a replacement for Ajax/Comet (<a href="http://www.infoq.com/news/2012/02/websockets-rest">maybe even REST</a>)</li>
<li>I know web apps, how different can this be?</li>
<li>I will program to a WebSocket API</li>
</ul>

</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="overview/slides/9">
<h1>Reality Check</h1>

<br><br>


<ul>
<li>Not supported in IE &lt; 10</li>
<li>There are issues with proxies</li>
<li>Not a replacement for REST</li>
<li>A socket is very low level to work on</li>
<li>Event-driven, messaging architecture</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="overview/slides/10">
<h1>WebSockets</h1>

<p><em>"Toto, I've a feeling we're not in REST land any more"</em></p>

<br>


<p><img src="./file/overview/WizardYellowBrick.jpg" alt="Wizard of Oz"/></p>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="overview/slides/11">
<h1>Last year's talk</h1>

<h2><a href="http://www.youtube.com/watch?v=z-CYO1ABCp4">Available on YouTube</a></h2>

<br><br><br>


<ul>
<li>Broad, pragmatic introduction</li>
<li>A survey of the land</li>
<li>Some key (open-ended) questions defined</li>
</ul>

</br>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="overview/slides/12">
<h1>Key Takeaways from Last Year</h1>

<br><br>


<ul>
<li>The need for fallback options will persist</li>
<li>Integrating into a real application not yet trivial</li>
<li>"Pure" WebSocket apps in the wild unlikely</li>
<li>Questions remain around usage patterns</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content center small" ref="ws-intro/slides/1">
<h1>A Quick Definition</h1>

<br><br>


<p><img src="./file/ws-intro/websocket-definition.png" alt="Image of Google search for WebSocket"/></p>
</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="ws-intro/slides/2">
<h1>What is WebSocket?</h1>

<ul>
<li>A layer on TCP</li>
<li>Full-duplex, stateful connection</li>
<li>Stream of messages (rather than bytes)</li>
<li>HTTP used for the initial handshake</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="ws-intro/slides/3">
<pre><code>HANDSHAKE REQUEST

GET /mychat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat
Sec-WebSocket-Version: 13
Origin: http://example.com
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="ws-intro/slides/4">
<pre><code>HANDSHAKE RESPONSE

HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content center small" ref="ws-intro/slides/5">
<h1>then exchange messages on the socket...</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="ws-intro/slides/6">
<h1>Typical API Lifecycle Events</h1>

<ul>
<li><code>open</code> - session established</li>
<li><code>message</code> - new messages received</li>
<li><code>error</code> - transport error</li>
<li><code>close</code> - session closed</li>
<li>Symmetrical on the client and server sides</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="ws-intro/slides/7">
<h1>WebSocket Frame</h1>

<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-------+-+-------------+-------------------------------+
|F|R|R|R| opcode|M| Payload len |    Extended payload length    |
|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |
|N|V|V|V|       |S|             |   (if payload len==126/127)   |
| |1|2|3|       |K|             |                               |
+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
|     Extended payload length continued, if payload len == 127  |
+ - - - - - - - - - - - - - - - +-------------------------------+
|                               |Masking-key, if MASK set to 1  |
+-------------------------------+-------------------------------+
| Masking-key (continued)       |          Payload Data         |
+-------------------------------- - - - - - - - - - - - - - - - +
:                     Payload Data continued ...                :
+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
|                     Payload Data continued ...                |
+---------------------------------------------------------------+
</code></pre>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="ws-intro/slides/8">
<h1>What kind of payload?</h1>

<br><br>


<ul>
<li>Text messages encoded as UTF-8</li>
<li>Binary messages</li>
<li>Control frames: close, ping, pong</li>
<li>Continuation frames</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="ws-intro/slides/9">
<h1>Message vs Frame</h1>

<br><br>


<ul>
<li>A message can be broken into fragments</li>
<li>Protocol implementation deals with fragments</li>
<li>Applications mainly work with messages</li>
<li>Good to know if tracing TCP traffic</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="runtime/slides/1">
<h1>Runtime Support</h1>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/2">
<h1>The Java API for WebSocket</h1>

<br><br>


<ul>
<li>Several Servlet containers pre-date JSR-356</li>
<li>Jetty 7/8, Tomcat 7, GlassFish 3.x</li>
<li>Much debate on JSR-356 EG</li>
<li>All-new WebSocket implementations</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/3">
<h1>Relationship to Servlet Spec</h1>

<br><br>


<ul>
<li>JSR-356 has no dependency on Servlet spec</li>
<li>Nevertheless built for and by Servlet containers</li>
<li>Servlet 3.1 provides a hook for upgrading:<br><code>HttpServletRequest.upgrade(Class&lt;?&gt;)</code></br>
<li>SCI scan used also in Servlet containers</li>
</li>

</ul>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/4">
<h1>Servlet Container Versions</h1>

<ul>
<li>Tomcat 8 (currently RC1)-<br>expect RC2 soon and also backport to Tomcat 7</br>
<li>Jetty 9 already has native WebSocket API-<br>Jetty 9.1 will add <code>JSR-356</code></br>
<li>Glassfish 4 with Tyrus WebSocket engine</li>
<li>More containers to follow</li>
</li>

</li>
</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/5">
<h1>The JSR-356 API</h1>

<br><br>


<ul>
<li>Two main options</li>
<li>Extend abstract class <code>Endpoint</code>, or</li>
<li>Use annotated endpoints via<br> <code>@ServerEndpoint</code>, <code>@ClientEndpoint</code></br>
</li>

</ul>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/6">
<h1>Server-Side Deployment</h1>

<h2><em>(JSR-356)</em></h2>

<br><br>


<ul>
<li>Also two main options</li>
<li>Servlet container scan for annotated endpoints</li>
<li>Programmatic deployment at startup<br> via <code>WebSocketContainer</code></br>
</li>

</ul>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/7">
<h1>JSR-356 in Spring Apps</h1>

<br><br>


<ul>
<li>Create endpoints through Spring container</li>
<li><a href="http://docs.spring.io/spring/docs/4.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/socket/server/endpoint/ServerEndpointExporter.html"><code>ServerEndpointExporter</code></a> deploys beans of type<br><a href="http://docs.spring.io/spring/docs/4.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/socket/server/endpoint/ServerEndpointExporter.html"><code>ServerEndpointRegistration</code></a></br>
<li><a href="http://docs.spring.io/spring/docs/4.0.0.BUILD-SNAPSHOT/javadoc-api/org/springframework/web/socket/server/endpoint/SpringConfigurator.html"><code>SpringConfigurator</code></a> can be referenced<br>via <code>@ServerEndpoint</code> attribute</br>
<li>Check Javadoc of these classes</li>
</li>

</li>
</ul>
</br></br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="runtime/slides/8">
<h1>JSR-356 Limitations</h1>

<ul>
<li>No fallback options (no IE)</li>
<li>No sub-protocol support, hard to build real apps</li>
<li>No way to <a href="https://java.net/jira/browse/WEBSOCKET_SPEC-211">handle HTTP and WebSocket requests</a><br>from one place (i.e. "front controller" pattern)</br>
<li>Resembles application framework<br>rather than remain flexible for frameworks to build on</br>
</li>

</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="runtime/slides/9">
<h1>Why Frameworks Matter?</h1>

<ul>
<li>If you maintain one WebSocket per client</li>
<li>i.e. one pipeline for all messages</li>
<li>You end up with single <code>@ServerEndpoint</code> per application</li>
<li>This is too rudimentary</li>
<li>Much like Servlet vs Web framework</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="runtime/slides/10">
<p>"Using annotations and things is clearly in the vein of Spring and Hibernate and other popular Java libraries. When trying to build on top of it, though, I find myself wishing for an API more like Jetty 8, where I can just implement some interfaces and build my own abstractions on top of WebSocket."</p>

<p><a href="http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03689.html">Comment</a> on jetty-users mailing list</p>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="spring-api/slides/1">
<h1>Spring WebSocket API</h1>
</div>
</div><div class="slide" data-transition="none">
  <div class="content smaller bullets incremental" ref="spring-api/slides/2">
<h1>Spring's own WebSocket API</h1>

<br><br>


<ul>
<li>Abstraction over WebSocket runtimes</li>
<li>Including JSR-356 containers</li>
<li>But not limited to it-<br>Jetty 9 native API, Netty (experimental)</br>
<li>Supports transparent fallback options<br>based on SockJS protocol</br>
<li>New <code>spring-websocket</code> module</li>
</li>

</li>
</ul>
</br></br></div>
</div><div class="slide" data-transition="none">
  <div class="content smaller" ref="spring-api/slides/3">
<h1>Example</h1>

<br><br>


<pre class="sh_java"><code>
public class EchoHandler extends TextWebSocketHandlerAdapter {


  @Override
  public void handleTextMessage(WebSocketSession session,
      TextMessage message) throws Exception {

    session.sendMessage(message);
  }

}</code></pre>
</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="spring-api/slides/4">
<h1>Java config</h1>

<pre class="sh_java"><code>
@Configuration
@EnableWebSocket
public class WebSocketConfig implements WebSocketConfigurer {


  @Override
  public void registerWebSocketHandlers(
      WebSocketHandlerRegistry registry) {

    registry.addHandler(new EchoHandler(), "/echo");
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="spring-api/slides/5">
<h1><code>HandshakeInterceptor</code></h1>

<ul>
<li>Access to HTTP request &amp; response<br>before and after handshake</br>
<li>Can preclude handshake</li>
<li>Can pass "handshake" attributes to <code>WebSocketSession</code></li>
<li>Example <code>HttpSessionHandshakeInterceptor</code></li>
</li>

</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="spring-api/slides/6">
<h1><code>WebSocketHandlerDecorator</code></h1>

<ul>
<li>Transparent decoration</li>
<li><code>ExceptionWebSocketHandlerDecorator</code></li>
<li><code>LoggingWebSocketHandlerDecorator</code></li>
<li>The above applied by default</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="spring-api/slides/7">
<h1><code>PerConnectionWebSocketHandler</code></h1>

<pre class="sh_java"><code>
@Configuration
@EnableWebSocket
public class WebSocketConfig implements WebSocketConfigurer {


  // ...


  @Bean
  public WebSocketHandler snakeHandler() {
    Class&lt;?&gt; clazz = SnakeWebSocketHandler.class;
    return new PerConnectionWebSocketHandler(clazz);
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="spring-api/slides/8">
<h1>Note on URL Mapping</h1>

<ul>
<li>Spring does not use JSR-356 deployment mechanism</li>
<li>Enables mapping <code>WebSocketHandler</code> in Spring MVC</li>
<li>Requires container-specific <code>RequestUpgradeStrategy</code></li>
<li>Currently supported are Tomcat, Jetty, Glassfish</li>
<li><a href="https://java.net/jira/browse/WEBSOCKET_SPEC-211">WEBSOCKET_SPEC-211</a> (exercise vote)</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="spring-api/slides/9">
<h1>Client-Side API</h1>

<ul>
<li>Programmatic handshake via <code>WebSocketClient</code></li>
<li>Returns <code>ListenableFuture&lt;WebSocketSession&gt;</code></li>
<li>Also available is declarative style (can auto-start)</li>
<li><code>ConnectionManagerSupport</code> and sub-classeses</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="spring-api/slides/10">
<h1>Example</h1>

<pre class="sh_java"><code>
@Configuration
static class ClientConfig {

  @Bean
  public WebSocketConnectionManager connectionManager() {

    String url = "ws://example.com:8080/echo";
    WebSocketHandler handler = new EchoWebSocketHandler();
    WebSocketClient client = new StandardWebSocketClient();

    WebSocketConnectionManager manager = 
        new WebSocketConnectionManager(client, handler, url);

    manager.setAutoStartup(true);
    return manager;
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="sockjs/slides/1">
<h1>SockJS Support</h1>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small bullets incremental" ref="sockjs/slides/2">
<h1><a href="https://github.com/sockjs/sockjs-client">SockJS</a> in a Nutshell</h1>

<br><br>


<ul>
<li>Emulate WebSocket API as close as possible</li>
<li>At least one streaming protocol per major browser</li>
<li>Cross-domain and cookie support</li>
<li>Polling in old browsers, hosts behind restrictive proxies</li>
<li>No Flash inside</li>
</ul>

</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="sockjs/slides/3">
<h2>SockJS Transports by Browser</h2>

<p><img src="./file/sockjs/transports.png" alt="Table with SockJS transports by browser"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="sockjs/slides/4">
<h1>Configure SockJS</h1>

<pre class="sh_java"><code>
@Configuration
@EnableWebSocket
public class WebSocketConfig implements WebSocketConfigurer {


  @Override
  public void registerWebSocketHandlers(
      WebSocketHandlerRegistry registry) {

    WebSocketHandler echoHandler = new EchoHandler();
    registry.addHandler(echoHandler, "/echo").withSockJS();
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="sockjs/slides/5">
<h1><code>WebSocketHandler</code></h1>

<h2>(remains unchanged)</h2>

<pre class="sh_java"><code>
public class EchoHandler extends TextWebSocketHandlerAdapter {

  @Override
  public void handleTextMessage(WebSocketSession session,
      TextMessage message) throws Exception {

    session.sendMessage(message);
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="sockjs/slides/6">
<h1>SockJS client</h1>

<pre class="sh_javascript"><code>
  var ws = new SockJS("ws://localhost:8080/echo");

  ws.onopen = function (event) {
    // ...
  };

  ws.onmessage = function (event) {
    // ...
  };

  ws.onclose = function (event) {
    // ...
  };</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="sockjs/slides/7">
<p><img src="./file/sockjs/sockjs-demo.png" alt="Chrome browser with SockJS network activity"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="sockjs/slides/8">
<h1>The SockJS Protocol</h1>

<ul>
<li>Defines URL scheme</li>
<li>Provided in the form of a readable <a href="http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html">test suite</a></li>
<li><a href="https://github.com/sockjs/sockjs-client">Wide support</a> across languages</li>
</ul>

</div>
</div><div class="slide" data-transition="none">
  <div class="content small bullets incremental" ref="sockjs/slides/9">
<h1>The SockJS URL Scheme</h1>

<br><br><br>


<pre><code>    GET  /echo

    GET  /echo/info

    POST /echo/&lt;server&gt;/&lt;session&gt;/&lt;transport&gt;
</code></pre>
</br>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content small" ref="sockjs/slides/10">
<h1>Example SockJS Requests</h1>

<br><br><br>


<pre><code>    GET /echo/info

    POST /echo/375/5rzpg08l/xhr_streaming

    POST /echo/375/5rzpg08l/xhr_send
    POST /echo/375/5rzpg08l/xhr_send
</code></pre>
</br>
</br>
</br></div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="sockjs/slides/11">
<h1>Runtime Support</h1>

<ul>
<li>Any Servlet 3.0 container</li>
<li>Even without WebSocket support!</li>
<li>No hard dependency on Servlet API</li>
<li>Experimental Netty support</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="sockjs/slides/12">
<h1>Client Disconnects</h1>

<ul>
<li>Servlet 3 containers don't detect clients going away</li>
<li><code>SockJsService</code> however sends periodic heartbeats</li>
<li>A failure to send a message closes the session</li>
<li>Check <a href="https://java.net/jira/browse/SERVLET_SPEC-44">SERVLET_SPEC-44</a> (vote please)<br> and also <a href="http://markmail.org/message/yhsslizqedcpg4zp">related discussion</a></br>
</li>

</ul>
</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="end/slides/1">
<h1>Example Code</h1>

<br><br>


<h2><a href="https://github.com/rstoyanchev/spring-websocket-test">https://github.com/rstoyanchev/</a></h2>

<h2><a href="https://github.com/rstoyanchev/spring-websocket-test">spring-websocket-test</a></h2>
</br>
</br>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small bullets incremental" ref="end/slides/2">
<br><br>


<h1>Beyond "Hello World"</h1>

<ul>
<li>WebSocket and SockJS are important foundations</li>
<li>We haven't discussed usage patterns</li>
<li>Come to my next session:<br><a href="https://springone2gx.com/conference/santa_clara/2013/09/session?id=29461">"Building WebSocket Browser Apps with Spring"</a></br>
</li>

</ul>
</br>
</br></div>
</div><div class="slide" data-transition="none">
  <div class="content subsection" ref="end/slides/3">
<h1>Thank You!</h1>

<br><br>


<p>Twitter</p>

<p><a href="http://twitter.com/rstoya05">@rstoya05</a></p>
</br>
</br>
</div>
</div></div>

</body>
</html>
